{% extends "base.html" %}

{% block content %}
  <section class="relative bg-gradient-to-r from-blue-600 to-blue-800 text-white py-16 overflow-hidden">
    <div class="absolute inset-0 pointer-events-none"
         style="background: radial-gradient(circle at 20% 50%, rgba(255,255,255,0.15) 0%, transparent 60%);">
    </div>

    <div class="relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
      <div class="flex justify-center mb-4">
        <div class="w-16 h-16 bg-white/20 backdrop-blur-sm rounded-full flex items-center justify-center border border-white/30">
          <i class="fas fa-key text-3xl text-white"></i>
        </div>
      </div>
      <h1 class="text-5xl font-extrabold tracking-tight mb-4">
        {% trans %}Reset Password{% endtrans %}
      </h1>
      <p class="text-blue-100 text-lg font-medium max-w-2xl mx-auto">
        {% if mode == "set" %}
          {% trans %}Create a new secure password for your account{% endtrans %}
        {% else %}
          {% trans %}Request a password reset link to be sent to your email{% endtrans %}
        {% endif %}
      </p>
    </div>
  </section>

  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
    <div class="max-w-md mx-auto">
      {% include "components/errors.html" %}

      <div class="bg-white rounded-xl shadow-lg border border-gray-200 border-t-4 border-t-blue-600 overflow-hidden">
        {% if mode == "set" %}
          {% with form = Forms.auth.ResetPasswordForm() %}
            <div class="p-8">
              <div class="mb-6">
                <div class="flex items-center gap-3 mb-3">
                  <div class="w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center">
                    <i class="fas fa-lock text-blue-600"></i>
                  </div>
                  <h2 class="text-2xl font-bold text-gray-900">{% trans %}Set New Password{% endtrans %}</h2>
                </div>
                <p class="text-gray-600 leading-relaxed">
                  {% trans %}You can now reset the password for your account and log in. Please enter in a new password below.{% endtrans %}
                </p>
              </div>

              <form method="post" accept-charset="utf-8" role="form">
                <div class="mb-6">
                  <label class="block text-sm font-bold text-gray-900 mb-2.5">
                    <i class="fas fa-key text-blue-600 mr-2"></i>{{ form.password.label.text }}
                  </label>
                  {{ form.password(class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all bg-white text-gray-900 placeholder-gray-400", autocomplete="new-password") }}
                  <small class="block mt-2.5 text-sm text-gray-500">
                    <i class="fas fa-info-circle text-blue-500 mr-1.5"></i>{% trans %}Choose a strong password with at least 8 characters{% endtrans %}
                  </small>
                </div>

                <div class="flex items-center justify-end gap-3 pt-4 border-t border-gray-200">
                  <a href="{{ url_for('auth.login') }}" class="px-6 py-2.5 border border-gray-300 rounded-lg text-gray-700 font-semibold hover:bg-gray-50 transition-colors">
                    {% trans %}Back to Login{% endtrans %}
                  </a>
                  {{ form.submit(class="px-6 py-2.5 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-semibold transition-all transform hover:scale-105 shadow-md hover:shadow-lg") }}
                </div>

                {{ form.nonce() }}
              </form>
            </div>
          {% endwith %}
        {% else %}
          {% with form = Forms.auth.ResetPasswordRequestForm() %}
            <div class="p-8">
              <div class="mb-6">
                <div class="flex items-center gap-3 mb-3">
                  <div class="w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center">
                    <i class="fas fa-envelope text-blue-600"></i>
                  </div>
                  <h2 class="text-2xl font-bold text-gray-900">{% trans %}Request Password Reset{% endtrans %}</h2>
                </div>
                <p class="text-gray-600 leading-relaxed">
                  {% trans %}Please provide the email address associated with your account below. We'll send you a link to reset your password.{% endtrans %}
                </p>
              </div>

              <form method="post" accept-charset="utf-8" autocomplete="off" role="form">
                <div class="mb-6">
                  <label class="block text-sm font-bold text-gray-900 mb-2.5">
                    <i class="fas fa-envelope text-blue-600 mr-2"></i>{{ form.email.label.text }}
                  </label>
                  {{ form.email(class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all bg-white text-gray-900 placeholder-gray-400", autocomplete="email") }}
                  <small class="block mt-2.5 text-sm text-gray-500">
                    <i class="fas fa-info-circle text-blue-500 mr-1.5"></i>{% trans %}We'll send password reset instructions to this email address{% endtrans %}
                  </small>
                </div>

                <div class="bg-blue-50 border-l-4 border-blue-500 rounded-lg p-4 mb-6">
                  <div class="flex items-start gap-2">
                    <i class="fas fa-shield-alt text-blue-500 mt-0.5"></i>
                    <div class="text-sm text-blue-700">
                      <strong class="block mb-1">{% trans %}Security Note{% endtrans %}</strong>
                      <p class="mb-0">{% trans %}If an account exists with this email, you will receive password reset instructions.{% endtrans %}</p>
                    </div>
                  </div>
                </div>

                <div class="flex items-center justify-end gap-3 pt-4 border-t border-gray-200">
                  <a href="{{ url_for('auth.login') }}" class="px-6 py-2.5 border border-gray-300 rounded-lg text-gray-700 font-semibold hover:bg-gray-50 transition-colors">
                    {% trans %}Back to Login{% endtrans %}
                  </a>
                  {{ form.submit(class="px-6 py-2.5 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-semibold transition-all transform hover:scale-105 shadow-md hover:shadow-lg") }}
                </div>

                {{ form.nonce() }}
              </form>
            </div>
          {% endwith %}
        {% endif %}
      </div>
    </div>
  </div>
{% endblock %}
